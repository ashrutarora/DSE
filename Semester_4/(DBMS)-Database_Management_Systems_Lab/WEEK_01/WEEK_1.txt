CREATE TABLE EMP(
EMPCODE NUMBER(3) CONSTRAINT PK_EMPNO PRIMARY KEY,
NAME VARCHAR2(10),
QUALIFICATION VARCHAR2(7) CONSTRAINT VALID_QUALIF CHECK( QUALIFICATION IN ('BTECH', 'MTECH', 'MSC', 'MCA', 'PHD')),
PHONE NUMBER(10),
EMAIL VARCHAR2(20) CONSTRAINT EMAIL_DOMAIN CHECK( EMAIL LIKE '%@digisol.com'),
DESIGNATION VARCHAR2(20) CONSTRAINT VALID_DESIGNATION CHECK( DESIGNATION IN ('DEVELOPER', 'PROJECT LEADER', 'PROJECT MANAGER', 'TECHNICAL HEAD', 'PROJECT DIRECTOR', 'PROJECT LEADER', 'CEO')),
SALARY NUMBER(7) CONSTRAINT SALARY_RANGE CHECK( SALARY BETWEEN 97000 AND 300000)
);

CREATE TABLE SKILL(
SKILLID CHAR(3) CONSTRAINT UNQ_SKILLID UNIQUE,
SKILLNAME VARCHAR(20) CONSTRAINT UNQ_SKILLNAME UNIQUE
);

CREATE TABLE EMP_SKILL(
EMPNO NUMBER(3) CONSTRAINT FK_EMPNO REFERENCES EMP,
SKILLID CHAR(3) CONSTRAINT FK_SKILLID REFERENCES SKILL(SKILLID) ON DELETE CASCADE,
SKILL_EXPERIENCE NUMBER(3) CHECK( SKILL_EXPERIENCE > 0)
);

CREATE TABLE CLIENT(
CLIENTID CHAR(3) CONSTRAINT PH_CLIENTID PRIMARY KEY CONSTRAINT STRTSWITH_C CHECK(CLIENTID LIKE 'C%'),
NAME VARCHAR2(10),
PHONE CHAR(14) CONSTRAINT PHONE_FORMAT CHECK(PHONE LIKE '+91-%' OR PHONE LIKE '+81-%' OR PHONE LIKE '+31-%' OR PHONE LIKE '+48-%' OR PHONE LIKE '+44-%');

CREATE TABLE PRJ_DETAILS(
PRJID CHAR(3) CONSTRAINT PK_PRJID PRIMARY KEY CHECK( PRJID LIKE 'P%'),
START_DATE DATE,
END_DATE DATE, CONSTRAINT END_DATE_GARTER_START_DATE CHECK(END_DATE > START_DATE),
ACTUAL_END_DATE DATE, CHECK( ACTUAL_END_DATE >= END_DATE),
LEAD_BY_EMPCODE NUMBER(3) CONSTRAINT FK_LEAD_EMP REFERENCES EMP,
BUDGET_ALLOCATED NUMERIC(10,1),
ACTUAL_BUDGET NUMERIC(10,1),
PRJ_NAME VARCHAR2(10)
);


CREATE TABLE WORK_EXP(
EMPCODE NUMBER(3) CONSTRAINT FK_EMPCODE REFERENCES EMP,
PRJID CHAR(3) CONSTRAINT FK_PRJID REFERENCES PRJ_DETAILS,
WORK_EXPERIENCE NUMBER(2) CONSTRAINT WOKR_EXP_GRTR_0 CHECK(WORK_EXPERIENCE >= 0),
CLIENTID CHAR(3) CONSTRAINT FK_CLIENTID REFERENCES CLIENT ON DELETE SET NULL,
RATING CHAR(1) CONSTRAINT RATING_VAL CHECK( RATING IN ('A','B','C')),
PRIMARY KEY(EMPCODE, PRJID)
);

CREATE TABLE FAMILY_DEPENDENTS(
EMPNO NUMBER(3) REFERENCES EMP,
DEP_NAME VARCHAR(20),
PRIMARY KEY(EMPNO, DEP_NAME),
RELATIONSHIP VARCHAR(16),
AGE NUMBER(3) CONSTRAINT VALID_AGE CHECK(AGE BETWEEN 1 AND 130)
);

CREATE TABLE MEDICAL_POLICY(
EMPNO NUMBER(3) CONSTRAINT FK_MedEMPNO REFERENCES EMP,
POLICYNO VARCHAR2(6) CONSTRAINT STRTSWITH_MED CHECK( POLICYNO LIKE 'MED___'),
PRIMARY KEY(EMPNO, POLICYNO),
PREMIUM NUMBER(5) CONSTRAINT CANT_BE_ZERO CHECK (PREMIUM >0),
POLICYDATE DATE
);

CREATE TABLE PAY_CHECK(
EMPCODE NUMBER(3) REFERENCES EMP,
PAY_DATE DATE,
PRIMARY KEY(EMPCODE, PAY_DATE),
REGULAR_INCREMENT NUMBER(4) CONSTRAINT VALID_REGU_INCENTIVE CHECK(REGULAR_INCREMENT IN('2000', '3000', '5000', '7000', '9000')),
PERFORMANCE_INCENTIVE NUMBER(5),
DA NUMBER(7),
PF NUMBER(7),
OTHER_INCENTIVES NUMBER(4),
ADVANCE_TAX NUMBER(5)
);